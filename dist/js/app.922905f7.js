(function(){"use strict";var e={2714:function(e,t,n){var a=n(9242),o=n(3396);function r(e,t,n,a,r,i){const c=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(c)])}var i={name:"App",components:{},data(){return{}},methods:{}},c=n(89);const s=(0,c.Z)(i,[["render",r]]);var u=s,l=n(2483);const d=(0,l.p7)({history:(0,l.PO)(),routes:[{path:"/",component:()=>n.e(616).then(n.bind(n,8616))}]});var h=d,g=n(65),m=n(6265),p=n.n(m);class f{async getNameCountry(e){return p().post("https://countriesnow.space/api/v0.1/countries/flag/unicode",{iso2:e}).then((e=>e.data)).catch((e=>e.response.data))}async getCitiesFromCountry(e){return p().post("https://countriesnow.space/api/v0.1/countries/cities",{country:e}).then((e=>e.data)).catch((e=>e.response.data))}async getAllCountry(){return p().get("https://countriesnow.space/api/v0.1/countries/flag/unicode").then((e=>e.data)).catch((e=>e.response.data))}async getPosition(){return new Promise((function(e,t){navigator.geolocation.getCurrentPosition(e,t)}))}}var y=new f;const E={namespaced:!0,state(){return{latitude:0,longitude:0,locations:[],countries:[]}},getters:{locationLength(e){return e.locations.length},locationPage(e,t,n){let a=n.weatherModule.pageWeather;return e.locations.slice(2*a,2*(a+1))}},mutations:{UPDATE_LOCATION_INDEX(e,t){let n=t.fromIndex,a=t.toIndex,o=e.locations[n];e.locations[n]=e.locations[a],e.locations[a]=o},UPDATE_COUTRIES_LIST(e,t){e.countries=t},UPDATE_LOCAL_LOCATION(e,t){e.latitude=t.latitude,e.longitude=t.longitude},SET_LOCATION(e,t){e.locations=t},ADD_LOCATION(e,t){let n={id:t.id,country:t.country,countryName:t.countryName,city:t.city,unicodeFlag:t.unicodeFlag};e.locations.push(n)},DELETE_LOCATION(e,t){let n=e.locations.findIndex((e=>e.id===t));-1!=n&&e.locations.splice(n,1)}},actions:{async getCitiesFromCountry({},e){let t=[];return await y.getCitiesFromCountry(e).then((e=>{!1===e.error&&(t=e.data)})),t},async getAllCountries({state:e,commit:t}){return 0===e.countries.length&&await y.getAllCountry().then((e=>{!1===e.error&&t("UPDATE_COUTRIES_LIST",e.data)})),e.countries},updateLocationIndex({commit:e,dispatch:t},n){e("UPDATE_LOCATION_INDEX",n),t("setLocalStorageLocations")},deleteLocation({commit:e,dispatch:t},n){e("DELETE_LOCATION",n),t("setLocalStorageLocations")},addNewLocation({commit:e,dispatch:t},n){e("ADD_LOCATION",n),t("setLocalStorageLocations")},setLocalStorageLocations({state:e}){localStorage.setItem("locations",JSON.stringify(e.locations))},getLocalStorageLocation({commit:e,state:t}){if(0===t.locations.length){let t=localStorage.getItem("locations");null!=t&&e("SET_LOCATION",JSON.parse(t))}},async checkLocalStorageLocation({commit:e,dispatch:t,state:n}){t("getLocalStorageLocation"),0===n.locations.length&&await y.getPosition().then((t=>{let a={latitude:t.coords.latitude,longitude:t.coords.longitude};e("UPDATE_LOCAL_LOCATION",a),console.log("SUCCESS GET POSITION.","LATITUDE =",n.latitude,"LONGTITUDE =",n.longitude)})).catch((t=>{let n={latitude:44.5,longitude:-89.5};e("UPDATE_LOCAL_LOCATION",n),console.log("ERROR GET POSITION. CODE: "+t.code,"MESSAGE: "+t.message+". SET DEFAULT LOCATION (WASHINGTON).")}))}}};class w{async getCurrentWeather(e,t){return p().get(`https://api.openweathermap.org/data/2.5/weather?lat=${e.latitude}&lon=${e.longitude}&appid=${t}&units=metric`).then((e=>e.data))}async getWeather(e,t,n){return p().get(`https://api.openweathermap.org/data/2.5/weather?q=${t},${e}&units=metric&appid=${n}&units=metric`).then((e=>e.data)).catch((e=>e.response.data))}}var S=new w;const T={namespaced:!0,state(){return{weather:[],pageWeather:0,compactSizeCard:!1}},getters:{weatherLength(e){return e.weather.length},weatherPage(e){return e.weather.slice(2*e.pageWeather,2*(e.pageWeather+1))}},actions:{changeSizeCard({commit:e,dispatch:t}){e("CHANGE_SIZE_CARD"),t("setLocalStorageSize")},async updatePageWeather({commit:e,rootState:t,state:n,dispatch:a},o){if(e("UPDATE_PAGE_WEATHER",o),n.weather.length<2*(n.pageWeather+1)-1){let e=t.locationModule.locations.slice(2*n.pageWeather,2*(n.pageWeather+1));for(const t of e)await S.getWeather(t.country,t.city,"673a5559a0536e9636be1ed282d0a897").then((async e=>{a("saveWeather",e)}))}},async addNewWeather({state:e,dispatch:t,commit:n,rootState:a},o){let r={success:"error",msg:""},i=a.locationModule.locations.find((e=>e.city===o.city&&e.country===o.country)),c=null;return void 0===i?await S.getWeather(o.country,o.city,"673a5559a0536e9636be1ed282d0a897").then((async a=>{if(404!=a.cod){c=await t("saveWeather",a),r["success"]="done",r["msg"]=o.city+" successfully added";let i=Math.ceil(e.weather.length/2)-1;n("SET_NEW_PAGE_WEATHER",i)}else r["success"]="error",r["msg"]=o.city+" not found in WeatherAPI"})):(r["success"]="error",r["msg"]=o.city+" already addedd in your list"),{res_data:r,location:c}},async getWeather({rootState:e,state:t,dispatch:n}){let a=e.locationModule,o=null;if(0!=a.locations.length){let e=a.locations.slice(2*t.pageWeather,2*(t.pageWeather+1));for(const t of e)await S.getWeather(t.country,t.city,"673a5559a0536e9636be1ed282d0a897").then((async e=>{o=await n("saveWeather",e)}))}else 0===a.locations.length&&0!=a.latitude&&0!=a.longitude&&await S.getCurrentWeather({latitude:a.latitude,longitude:a.longitude},"673a5559a0536e9636be1ed282d0a897").then((async e=>{o=await n("saveWeather",e)}));return o},async saveWeather({commit:e},t){let n=await y.getNameCountry(t.sys.country);if("data"in n){t.sys.countryName=n.data.name+" "+n.data.unicodeFlag,t.sys.unicodeFlag=n.data.unicodeFlag,e("ADD_WEATHER",t);let a={id:t.id,country:t.sys.country,countryName:t.sys.countryName,city:t.name,unicodeFlag:t.sys.unicodeFlag};return a}},deleteWeather({rootState:e,state:t,commit:n},a){let o=e.locationModule.locations;n("DELETE_WEATHER",a);let r=Math.ceil(o.length/2)-1;t.pageWeather>r&&n("SET_NEW_PAGE_WEATHER",r)},updateWeatherIndex({commit:e},t){e("UPDATE_WEATHER_INDEX",t)},setLocalStorageSize({state:e}){localStorage.setItem("compactSizeCard",e.compactSizeCard)},getLocalStorageSize({commit:e}){let t=localStorage.getItem("compactSizeCard");null!=t&&e("SET_SIZE_CARD",t)}},mutations:{SET_NEW_PAGE_WEATHER(e,t){e.pageWeather=t},UPDATE_PAGE_WEATHER(e,t){"increment"===t?e.pageWeather+=1:"reduction"===t&&(e.pageWeather-=1)},UPDATE_WEATHER_INDEX(e,t){let n=t.fromIndex,a=t.toIndex,o=e.weather[n];e.weather[n]=e.weather[a],e.weather[a]=o},ADD_WEATHER(e,t){let n=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW","W"];function a(e){let t="00";return e<10?t="0"+e:e>=10&&(t=e),t}function o(e){let n=new Date(1e3*(e+t.timezone));return a(n.getUTCHours())+":"+a(n.getUTCMinutes())}function r(){let e="",n="",a=function(e){return new Date(e).getTime()};return e=a(t.sys.sunrise)<=a(t.dt)&&a(t.dt)<=a(t.sys.sunset)?"day":"night",n=t.weather[0].main.toLowerCase(),"rain"!=n&&"thunderstorm"!=n&&"drizzle"!=n&&"atmosphere"!=n?n+e:"drizzle"===n?"rain":n}let i={id:t.id,icon:t.weather[0].icon,tempCurrent:Math.round(t.main.temp)+"째",tempFeels:Math.round(t.main.feels_like)+"째",tempMin:Math.round(t.main.temp_min)+"째",tempMax:Math.round(t.main.temp_max)+"째",weatherMain:t.weather[0].main,weatherBackground:r(),weatherDsc:t.weather[0].description,windDeg:t.wind.deg,windDirection:n[Math.ceil(t.wind.deg/22.5)],windSpeed:t.wind.speed+"km/h",sunrise:o(t.sys.sunrise),sunset:o(t.sys.sunset),currentTime:o(t.dt),city:t.name+" "+t.sys.unicodeFlag,country:t.sys.countryName,visibility:t.visibility/1e3+"km",humidity:t.main.humidity+"%",pressure:Math.round(.750062*t.main.pressure)};e.weather.push(i)},DELETE_WEATHER(e,t){let n=e.weather.findIndex((e=>e.id===t));-1!=n&&e.weather.splice(n,1)},CHANGE_SIZE_CARD(e){e.compactSizeCard=!e.compactSizeCard},SET_SIZE_CARD(e,t){e.compactSizeCard=t}}};var v=(0,g.MT)({state(){return{}},modules:{locationModule:E,weatherModule:T},getters:{},mutations:{},actions:{}});(0,a.ri)(u).use(v).use(h).mount("#app")}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(t,a,o,r){if(!a){var i=1/0;for(l=0;l<e.length;l++){a=e[l][0],o=e[l][1],r=e[l][2];for(var c=!0,s=0;s<a.length;s++)(!1&r||i>=r)&&Object.keys(n.O).every((function(e){return n.O[e](a[s])}))?a.splice(s--,1):(c=!1,r<i&&(i=r));if(c){e.splice(l--,1);var u=o();void 0!==u&&(t=u)}}return t}r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[a,o,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,a){return n.f[a](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+e+".5bcdc326.js"}}(),function(){n.miniCssF=function(e){return"css/"+e+".162c246a.css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="vue-weather-widget:";n.l=function(a,o,r,i){if(e[a])e[a].push(o);else{var c,s;if(void 0!==r)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var d=u[l];if(d.getAttribute("src")==a||d.getAttribute("data-webpack")==t+r){c=d;break}}c||(s=!0,c=document.createElement("script"),c.charset="utf-8",c.timeout=120,n.nc&&c.setAttribute("nonce",n.nc),c.setAttribute("data-webpack",t+r),c.src=a),e[a]=[o];var h=function(t,n){c.onerror=c.onload=null,clearTimeout(g);var o=e[a];if(delete e[a],c.parentNode&&c.parentNode.removeChild(c),o&&o.forEach((function(e){return e(n)})),t)return t(n)},g=setTimeout(h.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=h.bind(null,c.onerror),c.onload=h.bind(null,c.onload),s&&document.head.appendChild(c)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/"}(),function(){var e=function(e,t,n,a){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css";var r=function(r){if(o.onerror=o.onload=null,"load"===r.type)n();else{var i=r&&("load"===r.type?"missing":r.type),c=r&&r.target&&r.target.href||t,s=new Error("Loading CSS chunk "+e+" failed.\n("+c+")");s.code="CSS_CHUNK_LOAD_FAILED",s.type=i,s.request=c,o.parentNode.removeChild(o),a(s)}};return o.onerror=o.onload=r,o.href=t,document.head.appendChild(o),o},t=function(e,t){for(var n=document.getElementsByTagName("link"),a=0;a<n.length;a++){var o=n[a],r=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(r===e||r===t))return o}var i=document.getElementsByTagName("style");for(a=0;a<i.length;a++){o=i[a],r=o.getAttribute("data-href");if(r===e||r===t)return o}},a=function(a){return new Promise((function(o,r){var i=n.miniCssF(a),c=n.p+i;if(t(i,c))return o();e(a,c,o,r)}))},o={143:0};n.f.miniCss=function(e,t){var n={616:1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=a(e).then((function(){o[e]=0}),(function(t){throw delete o[e],t})))}}(),function(){var e={143:0};n.f.j=function(t,a){var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)a.push(o[2]);else{var r=new Promise((function(n,a){o=e[t]=[n,a]}));a.push(o[2]=r);var i=n.p+n.u(t),c=new Error,s=function(a){if(n.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var r=a&&("load"===a.type?"missing":a.type),i=a&&a.target&&a.target.src;c.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",c.name="ChunkLoadError",c.type=r,c.request=i,o[1](c)}};n.l(i,s,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,r,i=a[0],c=a[1],s=a[2],u=0;if(i.some((function(t){return 0!==e[t]}))){for(o in c)n.o(c,o)&&(n.m[o]=c[o]);if(s)var l=s(n)}for(t&&t(a);u<i.length;u++)r=i[u],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(l)},a=self["webpackChunkvue_weather_widget"]=self["webpackChunkvue_weather_widget"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(2714)}));a=n.O(a)})();
//# sourceMappingURL=app.922905f7.js.map